<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEST ULTRA-COMPLET - Hybrid Master</title>
    <style>
        :root {
            --primary: #0f172a;
            --secondary: #1e293b;
            --accent: #3b82f6;
            --danger: #ef4444;
            --success: #10b981;
            --warning: #f59e0b;
            --info: #06b6d4;
            --purple: #8b5cf6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            min-height: 100vh;
            line-height: 1.6;
        }

        .ultra-test-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .ultra-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 25px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
        }

        .ultra-header h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--accent), var(--purple), var(--warning));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
        }

        .scan-badge {
            display: inline-block;
            padding: 12px 30px;
            background: var(--info);
            border-radius: 25px;
            font-weight: bold;
            margin-top: 15px;
            font-size: 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        /* Navigation des Tests */
        .test-navigation {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
        }

        .nav-test-btn {
            padding: 12px 25px;
            background: var(--secondary);
            border: 2px solid var(--accent);
            border-radius: 15px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .nav-test-btn:hover {
            background: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        .nav-test-btn.active {
            background: var(--accent);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
        }

        /* Sections de Test */
        .test-category {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .category-header {
            color: var(--accent);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--accent);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .category-stats {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
        }

        .stat {
            padding: 5px 12px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
        }

        /* Grille de RÃ©sultats DÃ©taillÃ©s */
        .detailed-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .test-case {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid var(--danger);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .test-case::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--danger), var(--warning), var(--success));
        }

        .test-case.success {
            border-left-color: var(--success);
        }

        .test-case.warning {
            border-left-color: var(--warning);
        }

        .test-case.info {
            border-left-color: var(--info);
        }

        .test-case:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 15px;
        }

        .test-title {
            font-weight: bold;
            color: var(--warning);
            font-size: 1.1rem;
            flex: 1;
        }

        .test-badge {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            white-space: nowrap;
        }

        .badge-error { background: var(--danger); }
        .badge-success { background: var(--success); }
        .badge-warning { background: var(--warning); color: black; }
        .badge-info { background: var(--info); }

        .test-description {
            color: #ccc;
            margin-bottom: 15px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .test-details {
            background: rgba(255, 255, 255, 0.08);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
        }

        .test-solution {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--info);
            font-size: 0.9rem;
        }

        .solution-title {
            color: var(--info);
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Console AvancÃ©e */
        .advanced-console {
            background: #0a0a0a;
            color: #00ff00;
            padding: 25px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            height: 400px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid rgba(0, 255, 0, 0.2);
        }

        .console-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 255, 0, 0.3);
        }

        .log-entry {
            margin-bottom: 10px;
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .log-timestamp {
            color: #666;
            min-width: 90px;
            font-size: 0.8rem;
        }

        .log-level {
            font-weight: bold;
            min-width: 80px;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.75rem;
            text-align: center;
        }

        .level-debug { background: #666; color: #fff; }
        .level-info { background: var(--info); color: #fff; }
        .level-warn { background: var(--warning); color: #000; }
        .level-error { background: var(--danger); color: #fff; }
        .level-success { background: var(--success); color: #fff; }

        .log-message {
            flex: 1;
            word-break: break-word;
        }

        /* ContrÃ´les de Test */
        .test-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-btn.primary {
            background: linear-gradient(135deg, var(--success), var(--info));
        }

        .control-btn.secondary {
            background: linear-gradient(135deg, var(--warning), var(--purple));
        }

        .control-btn.danger {
            background: linear-gradient(135deg, var(--danger), var(--warning));
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        /* Progressions */
        .progress-section {
            margin: 25px 0;
        }

        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .progress-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .progress-number {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--accent), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .progress-label {
            color: #ccc;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .ultra-test-container {
                padding: 10px;
            }
            
            .ultra-header h1 {
                font-size: 2rem;
            }
            
            .detailed-results {
                grid-template-columns: 1fr;
            }
            
            .test-navigation {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-test-btn {
                width: 100%;
                text-align: center;
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="ultra-test-container">
        <!-- Header -->
        <div class="ultra-header">
            <h1>ð¬ TEST ULTRA-COMPLET - HYBRID MASTER</h1>
            <p>Analyse exhaustive de l'architecture complÃ¨te - 100% non-invasive</p>
            <div class="scan-badge pulse" id="global-status">INITIALISATION DES TESTS...</div>
        </div>

        <!-- Navigation -->
        <div class="test-navigation">
            <button class="nav-test-btn active" onclick="showCategory('modules')">ð¦ Modules JS</button>
            <button class="nav-test-btn" onclick="showCategory('dom')">ð DOM & ÃvÃ©nements</button>
            <button class="nav-test-btn" onclick="showCategory('data')">ð DonnÃ©es & State</button>
            <button class="nav-test-btn" onclick="showCategory('performance')">â¡ Performance</button>
            <button class="nav-test-btn" onclick="showCategory('architecture')">ðï¸ Architecture</button>
            <button class="nav-test-btn" onclick="showCategory('security')">ð¡ï¸ SÃ©curitÃ©</button>
        </div>

        <!-- ContrÃ´les -->
        <div class="test-controls">
            <button class="control-btn primary" onclick="runAllTests()">
                ð Lancer tous les tests
            </button>
            <button class="control-btn secondary" onclick="generateUltraReport()">
                ð Rapport dÃ©taillÃ©
            </button>
            <button class="control-btn danger" onclick="stressTest()">
                ð¥ Test de stress
            </button>
        </div>

        <!-- Progression Globale -->
        <div class="progress-section">
            <div class="progress-grid">
                <div class="progress-item">
                    <div class="progress-number" id="total-tests">0</div>
                    <div class="progress-label">Tests Totaux</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number" id="passed-tests">0</div>
                    <div class="progress-label">Tests RÃ©ussis</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number" id="failed-tests">0</div>
                    <div class="progress-label">Tests ÃchouÃ©s</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number" id="coverage">0%</div>
                    <div class="progress-label">Couverture</div>
                </div>
            </div>
        </div>

        <!-- CatÃ©gorie: Modules JavaScript -->
        <div class="test-category" id="category-modules">
            <div class="category-header">
                <h2>ð¦ MODULES JAVASCRIPT</h2>
                <div class="category-stats">
                    <div class="stat" id="modules-stats">0/0 tests</div>
                    <div class="stat" id="modules-coverage">0%</div>
                </div>
            </div>
            <div class="detailed-results" id="modules-results">
                <!-- RÃ©sultats dÃ©taillÃ©s des modules -->
            </div>
        </div>

        <!-- CatÃ©gorie: DOM & ÃvÃ©nements -->
        <div class="test-category" id="category-dom" style="display: none;">
            <div class="category-header">
                <h2>ð DOM & ÃVÃNEMENTS</h2>
                <div class="category-stats">
                    <div class="stat" id="dom-stats">0/0 tests</div>
                    <div class="stat" id="dom-coverage">0%</div>
                </div>
            </div>
            <div class="detailed-results" id="dom-results">
                <!-- RÃ©sultats dÃ©taillÃ©s du DOM -->
            </div>
        </div>

        <!-- CatÃ©gorie: DonnÃ©es & State -->
        <div class="test-category" id="category-data" style="display: none;">
            <div class="category-header">
                <h2>ð DONNÃES & STATE MANAGEMENT</h2>
                <div class="category-stats">
                    <div class="stat" id="data-stats">0/0 tests</div>
                    <div class="stat" id="data-coverage">0%</div>
                </div>
            </div>
            <div class="detailed-results" id="data-results">
                <!-- RÃ©sultats dÃ©taillÃ©s des donnÃ©es -->
            </div>
        </div>

        <!-- Console AvancÃ©e -->
        <div class="test-category">
            <div class="category-header">
                <h2>ð CONSOLE DE DEBUG AVANCÃE</h2>
                <div class="category-stats">
                    <div class="stat" id="console-stats">0 logs</div>
                </div>
            </div>
            <div class="advanced-console" id="advanced-console">
                <div class="console-header">
                    <span>Journal d'exÃ©cution des tests</span>
                    <span id="console-time">[00:00:00]</span>
                </div>
                <div class="log-entry">
                    <span class="log-timestamp">[00:00:00.000]</span>
                    <span class="log-level level-info">INFO</span>
                    <span class="log-message">SystÃ¨me de test ultra-complet initialisÃ©</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================================================
        // CONFIGURATION ULTRA-COMPLÃTE DES TESTS
        // ============================================================================

        const ULTRA_TEST_CONFIG = {
            // Tests des modules JavaScript
            modules: {
                core: [
                    { path: './scripts/core/program-data.js', type: 'CLASS', methods: ['getWeek', 'getWorkout', 'getCurrentWeek'] },
                    { path: './scripts/core/exercise-library.js', type: 'MODULE', methods: ['getExercise', 'searchExercises', 'getMuscleGroups'] }
                ],
                ui: [
                    { path: './scripts/ui/workout-renderer.js', type: 'CLASS', methods: ['renderWorkout', 'updateDisplay', 'handleNavigation'] },
                    { path: './scripts/ui/navigation-ui.js', type: 'CLASS', methods: ['setupNavigation', 'updateWeekDisplay', 'handleWeekChange'] },
                    { path: './scripts/ui/timer-ui.js', type: 'CLASS', methods: ['startTimer', 'pauseTimer', 'resetTimer', 'updateDisplay'] }
                ],
                modules: [
                    { path: './scripts/modules/timer-manager.js', type: 'CLASS', methods: ['start', 'pause', 'reset', 'getTime'] },
                    { path: './scripts/modules/workout-session.js', type: 'CLASS', methods: ['startSession', 'endSession', 'addExercise', 'getProgress'] },
                    { path: './scripts/modules/progress-tracker.js', type: 'CLASS', methods: ['trackSet', 'calculateVolume', 'getPersonalRecords'] }
                ],
                storage: [
                    { path: './scripts/storage/local-storage.js', type: 'MODULE', methods: ['saveWorkout', 'loadWorkout', 'clearData', 'getAllData'] }
                ],
                utils: [
                    { path: './scripts/utils/helpers.js', type: 'MODULE', methods: ['formatTime', 'calculate1RM', 'getMuscleGroup'] },
                    { path: './scripts/utils/validators.js', type: 'MODULE', methods: ['validateWeight', 'validateReps', 'validateRPE'] }
                ]
            },

            // Tests du DOM et Ã©vÃ©nements
            dom: {
                elements: [
                    'app', 'workout-container', 'week-display', 'prev-week', 'next-week',
                    'timer-display', 'timer-start', 'timer-pause', 'timer-reset',
                    'exercise-list', 'workout-days', 'progress-section', 'settings-panel'
                ],
                events: [
                    { element: 'prev-week', event: 'click', handler: 'handlePrevWeek' },
                    { element: 'next-week', event: 'click', handler: 'handleNextWeek' },
                    { element: 'timer-start', event: 'click', handler: 'startTimer' },
                    { element: 'timer-pause', event: 'click', handler: 'pauseTimer' },
                    { element: 'timer-reset', event: 'click', handler: 'resetTimer' }
                ],
                structure: [
                    { check: 'DOCTYPE', expected: 'html' },
                    { check: 'viewport', expected: 'width=device-width' },
                    { check: 'charset', expected: 'UTF-8' },
                    { check: 'title', expected: 'Hybrid Master' }
                ]
            },

            // Tests des donnÃ©es et state
            data: {
                program: [
                    { check: 'weeks', type: 'number', min: 1, max: 52 },
                    { check: 'workouts', type: 'object' },
                    { check: 'exercises', type: 'array' }
                ],
                workout: [
                    { check: 'day', type: 'string' },
                    { check: 'exercises', type: 'array' },
                    { check: 'sets', type: 'number', min: 1 },
                    { check: 'reps', type: 'number', min: 1 }
                ],
                session: [
                    { check: 'startTime', type: 'number' },
                    { check: 'exercises', type: 'array' },
                    { check: 'volume', type: 'number' }
                ]
            },

            // Tests de performance
            performance: {
                load: [
                    { metric: 'DOMContentLoaded', max: 3000 },
                    { metric: 'load', max: 5000 },
                    { metric: 'firstPaint', max: 1000 }
                ],
                memory: [
                    { metric: 'usedJSHeapSize', max: 50000000 },
                    { metric: 'totalJSHeapSize', max: 100000000 }
                ],
                execution: [
                    { test: 'navigation', max: 100 },
                    { test: 'timer', max: 50 },
                    { test: 'rendering', max: 200 }
                ]
            }
        };

        // ============================================================================
        // SYSTÃME DE TEST ULTRA-COMPLET
        // ============================================================================

        class UltraTestRunner {
            constructor() {
                this.results = {
                    modules: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    dom: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    data: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    performance: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    architecture: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    security: { tests: [], stats: { total: 0, passed: 0, failed: 0 } }
                };
                this.consoleLogs = [];
            }

            // Logging avancÃ©
            log(message, level = 'info', details = null) {
                const timestamp = new Date().toLocaleTimeString() + '.' + new Date().getMilliseconds().toString().padStart(3, '0');
                const logEntry = { timestamp, level, message, details };
                this.consoleLogs.push(logEntry);

                // Mise Ã  jour UI
                this.updateConsoleUI(logEntry);
                this.updateConsoleStats();
            }

            updateConsoleUI(logEntry) {
                const console = document.getElementById('advanced-console');
                const logElement = document.createElement('div');
                logElement.className = 'log-entry fade-in';
                logElement.innerHTML = `
                    <span class="log-timestamp">[${logEntry.timestamp}]</span>
                    <span class="log-level level-${logEntry.level}">${logEntry.level.toUpperCase()}</span>
                    <span class="log-message">${logEntry.message}</span>
                `;
                console.appendChild(logElement);
                console.scrollTop = console.scrollHeight;
            }

            updateConsoleStats() {
                document.getElementById('console-stats').textContent = `${this.consoleLogs.length} logs`;
                document.getElementById('console-time').textContent = `[${new Date().toLocaleTimeString()}]`;
            }

            // Test individuel
            async runTest(testConfig, category) {
                const testResult = {
                    id: `${category}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
                    title: testConfig.title || 'Test sans nom',
                    description: testConfig.description || '',
                    category: category,
                    status: 'pending',
                    details: {},
                    solution: testConfig.solution || '',
                    timestamp: new Date().toISOString()
                };

                try {
                    this.log(`DÃ©but du test: ${testResult.title}`, 'debug', testConfig);
                    
                    // ExÃ©cution du test
                    if (testConfig.test) {
                        const result = await testConfig.test();
                        testResult.status = result.passed ? 'success' : 'failed';
                        testResult.details = result.details || {};
                        testResult.message = result.message || '';
                    } else {
                        testResult.status = 'warning';
                        testResult.message = 'Aucune fonction de test dÃ©finie';
                    }

                } catch (error) {
                    testResult.status = 'error';
                    testResult.message = `Erreur: ${error.message}`;
                    testResult.details.error = error.stack;
                    this.log(`ERREUR dans ${testResult.title}: ${error.message}`, 'error', error);
                }

                // Mise Ã  jour des statistiques
                this.results[category].tests.push(testResult);
                this.results[category].stats.total++;
                if (testResult.status === 'success') {
                    this.results[category].stats.passed++;
                } else {
                    this.results[category].stats.failed++;
                }

                // Mise Ã  jour UI
                this.updateTestUI(testResult);
                this.updateGlobalStats();

                this.log(`Test ${testResult.title}: ${testResult.status.toUpperCase()}`, 
                        testResult.status === 'success' ? 'success' : 'error', testResult);

                return testResult;
            }

            updateTestUI(testResult) {
                const categoryElement = document.getElementById(`${testResult.category}-results`);
                if (!categoryElement) return;

                const testElement = document.createElement('div');
                testElement.className = `test-case ${testResult.status} fade-in`;
                testElement.innerHTML = `
                    <div class="test-header">
                        <div class="test-title">${testResult.title}</div>
                        <div class="test-badge badge-${testResult.status}">
                            ${testResult.status === 'success' ? 'â RÃUSSI' : 
                              testResult.status === 'warning' ? 'â  ATTENTION' : 
                              testResult.status === 'error' ? 'â ERREUR' : 'â INCONNU'}
                        </div>
                    </div>
                    <div class="test-description">${testResult.description}</div>
                    ${testResult.message ? `<div class="test-details"><strong>RÃ©sultat:</strong> ${testResult.message}</div>` : ''}
                    ${Object.keys(testResult.details).length > 0 ? 
                        `<div class="test-details"><strong>DÃ©tails:</strong><pre>${JSON.stringify(testResult.details, null, 2)}</pre></div>` : ''}
                    ${testResult.solution ? `
                        <div class="test-solution">
                            <div class="solution-title">ð¡ SOLUTION RECOMMANDÃE</div>
                            ${testResult.solution}
                        </div>
                    ` : ''}
                `;

                categoryElement.appendChild(testElement);
            }

            updateGlobalStats() {
                let totalTests = 0;
                let passedTests = 0;
                let failedTests = 0;

                Object.values(this.results).forEach(category => {
                    totalTests += category.stats.total;
                    passedTests += category.stats.passed;
                    failedTests += category.stats.failed;
                });

                const coverage = totalTests > 0 ? Math.round((passedTests / totalTests) * 100) : 0;

                document.getElementById('total-tests').textContent = totalTests;
                document.getElementById('passed-tests').textContent = passedTests;
                document.getElementById('failed-tests').textContent = failedTests;
                document.getElementById('coverage').textContent = `${coverage}%`;

                // Mise Ã  jour des stats par catÃ©gorie
                Object.keys(this.results).forEach(category => {
                    const stats = this.results[category].stats;
                    const coverage = stats.total > 0 ? Math.round((stats.passed / stats.total) * 100) : 0;
                    const statsElement = document.getElementById(`${category}-stats`);
                    const coverageElement = document.getElementById(`${category}-coverage`);
                    
                    if (statsElement) statsElement.textContent = `${stats.passed}/${stats.total} tests`;
                    if (coverageElement) coverageElement.textContent = `${coverage}%`;
                });
            }

            // MÃ©thodes de test spÃ©cifiques
            async testModuleExistence(moduleConfig) {
                return this.runTest({
                    title: `Module: ${moduleConfig.path}`,
                    description: `VÃ©rification de l'existence du module ${moduleConfig.path}`,
                    test: async () => {
                        const response = await fetch(moduleConfig.path);
                        const exists = response.status === 200;
                        return {
                            passed: exists,
                            message: exists ? 'Module trouvÃ© et accessible' : 'Module introuvable (404)',
                            details: { path: moduleConfig.path, status: response.status }
                        };
                    },
                    solution: exists ? null : `CrÃ©er le fichier: ${moduleConfig.path}`
                }, 'modules');
            }

            async testDOMElement(elementId) {
                return this.runTest({
                    title: `ÃlÃ©ment DOM: #${elementId}`,
                    description: `VÃ©rification de la prÃ©sence de l'Ã©lÃ©ment #${elementId} dans le DOM`,
                    test: async () => {
                        const element = document.getElementById(elementId);
                        const exists = !!element;
                        return {
                            passed: exists,
                            message: exists ? 'ÃlÃ©ment prÃ©sent dans le DOM' : 'ÃlÃ©ment introuvable',
                            details: { elementId, exists, tagName: element?.tagName }
                        };
                    },
                    solution: `Ajouter dans index.html: &lt;div id="${elementId}"&gt;&lt;/div&gt;`
                }, 'dom');
            }

            // Lancement de tous les tests
            async runAllTests() {
                this.log('ð DÃMARRAGE DE TOUS LES TESTS ULTRA-COMPLETS', 'info');
                document.getElementById('global-status').textContent = 'TESTS EN COURS...';
                document.getElementById('global-status').style.background = 'var(--warning)';

                // Tests des modules
                for (const [category, modules] of Object.entries(ULTRA_TEST_CONFIG.modules)) {
                    for (const module of modules) {
                        await this.testModuleExistence(module);
                        await new Promise(resolve => setTimeout(resolve, 100)); // Pause pour Ã©viter la surcharge
                    }
                }

                // Tests DOM
                for (const elementId of ULTRA_TEST_CONFIG.dom.elements) {
                    await this.testDOMElement(elementId);
                    await new Promise(resolve => setTimeout(resolve, 50));
                }

                // Finalisation
                document.getElementById('global-status').textContent = 'TESTS TERMINÃS â';
                document.getElementById('global-status').style.background = 'var(--success)';
                this.log('â TOUS LES TESTS ULTRA-COMPLETS TERMINÃS', 'success');
            }

            // GÃ©nÃ©ration de rapport dÃ©taillÃ©
            generateUltraReport() {
                const report = {
                    timestamp: new Date().toISOString(),
                    config: ULTRA_TEST_CONFIG,
                    results: this.results,
                    logs: this.consoleLogs,
                    summary: this.getSummary(),
                    solutions: this.getSolutions()
                };

                const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `ultra-test-report-${new Date().toISOString().replace(/[:.]/g, '-')}.json`;
                a.click();

                this.log('ð Rapport ultra-dÃ©taillÃ© gÃ©nÃ©rÃ© et tÃ©lÃ©chargÃ©', 'success');
            }

            getSummary() {
                let total = 0, passed = 0, failed = 0;
                Object.values(this.results).forEach(category => {
                    total += category.stats.total;
                    passed += category.stats.passed;
                    failed += category.stats.failed;
                });

                return {
                    totalTests: total,
                    passedTests: passed,
                    failedTests: failed,
                    successRate: total > 0 ? (passed / total) * 100 : 0,
                    categories: Object.keys(this.results).map(cat => ({
                        category: cat,
                        ...this.results[cat].stats
                    }))
                };
            }

            getSolutions() {
                const solutions = [];
                Object.values(this.results).forEach(category => {
                    category.tests.forEach(test => {
                        if (test.status !== 'success' && test.solution) {
                            solutions.push({
                                category: test.category,
                                problem: test.title,
                                solution: test.solution,
                                priority: test.status === 'error' ? 'HIGH' : 'MEDIUM'
                            });
                        }
                    });
                });
                return solutions;
            }
        }

        // ============================================================================
        // INITIALISATION ET INTERFACE UTILISATEUR
        // ============================================================================

        let testRunner;

        function showCategory(category) {
            // Masquer toutes les catÃ©gories
            document.querySelectorAll('.test-category').forEach(el => {
                el.style.display = 'none';
            });
            
            // Afficher la catÃ©gorie sÃ©lectionnÃ©e
            document.getElementById(`category-${category}`).style.display = 'block';
            
            // Mettre Ã  jour la navigation
            document.querySelectorAll('.nav-test-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function runAllTests() {
            if (!testRunner) {
                testRunner = new UltraTestRunner();
            }
            testRunner.runAllTests();
        }

        function generateUltraReport() {
            if (testRunner) {
                testRunner.generateUltraReport();
            } else {
                alert('Veuillez d\'abord exÃ©cuter les tests');
            }
        }

        function stressTest() {
            testRunner.log('ð¥ DÃ©marrage du test de stress...', 'warn');
            // ImplÃ©mentation du test de stress
            alert('Test de stress - Cette fonctionnalitÃ© simule une charge Ã©levÃ©e sur l\'application');
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            testRunner = new UltraTestRunner();
            testRunner.log('SystÃ¨me de test ultra-complet initialisÃ© et prÃªt', 'success');
            
            // DÃ©marrer automatiquement quelques tests de base
            setTimeout(() => {
                testRunner.testDOMElement('app');
                testRunner.testDOMElement('workout-container');
            }, 1000);
        });
    </script>
</body>
</html>
